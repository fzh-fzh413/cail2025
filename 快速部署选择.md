# 🚀 快速部署选择指南

## 最快方案（5分钟）🔥

### ⭐ 方案 A：ngrok（本地测试，最简单）

**适合：** 快速测试、临时使用

**步骤：**

1. 下载 ngrok：https://ngrok.com/download

2. 注册账号并获取 token：https://dashboard.ngrok.com/get-started/your-authtoken

3. 配置：
   ```bash
   ngrok config add-authtoken YOUR_TOKEN
   ```

4. 启动 Flask（终端1）：
   ```bash
   python app.py
   ```

5. 启动 ngrok（终端2）：
   ```bash
   ngrok http 5000
   ```

6. 复制显示的 URL，例如：`https://abc123.ngrok-free.app`

7. 提交 JSON：
   ```json
   {
     "api_key": "https://abc123.ngrok-free.app/model"
   }
   ```

**优点：** ⚡ 5分钟搞定，无需修改代码  
**缺点：** URL 每次重启会变化，本地电脑需要一直运行

---

## 稳定方案（15分钟）⭐

### ⭐⭐ 方案 B：Render（推荐，免费且稳定）

**适合：** 长期使用、稳定部署

**步骤：**

1. **注册 Render**：https://render.com/ （可用 GitHub 账号登录）

2. **准备代码**（已创建好，直接使用）：
   - ✅ `Procfile` - 已创建
   - ✅ `render.yaml` - 已创建
   - ✅ `requirements.txt` - 已包含 gunicorn

3. **方式1：通过 GitHub 部署（推荐）**
   
   **步骤 3.1：将代码推送到 GitHub**
   
   如果您还没有安装 Git，请先下载：https://git-scm.com/download/win
   
   在项目目录下打开 PowerShell 或命令提示符，执行以下命令：
   
   ```bash
   # 1. 初始化 Git 仓库（如果还没有）
   git init
   
   # 2. 添加所有文件到暂存区
   git add .
   
   # 3. 提交代码
   git commit -m "Initial commit: Ready for Render deployment"
   
   # 4. 在 GitHub 上创建新仓库（登录 https://github.com）
   #    点击右上角 "+" → "New repository"
   #    输入仓库名称（如：legal-ai-api）
   #    选择 Public 或 Private
   #    不要勾选 "Initialize with README"（因为本地已有代码）
   #    点击 "Create repository"
   
   # 5. 添加远程仓库（将 YOUR_USERNAME 和 YOUR_REPO_NAME 替换为您的实际值）
   git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git
   
   # 6. 推送到 GitHub
   git branch -M main
   git push -u origin main
   ```
   
   **步骤 3.2：在 Render 中连接 GitHub**
   
   - 登录 Render：https://render.com/
   - 点击 "New +" → "Web Service"
   - 点击 "Connect GitHub" 或 "Connect account"
   - 授权 Render 访问您的 GitHub 账号
   - 选择您刚创建的仓库
   - 设置以下配置：
     - **Name**: 您的服务名称（如：legal-ai-api）
     - **Region**: 选择离您最近的区域
     - **Branch**: main
     - **Root Directory**: 留空（如果代码在根目录）
     - **Runtime**: Python 3
     - **Build Command**: `pip install -r requirements.txt`
     - **Start Command**: `gunicorn app:app`
   - 点击 "Advanced" 添加环境变量：
     - Key: `DASHSCOPE_API_KEY`
     - Value: 您的 API Key
   - 点击 "Create Web Service"
   - 等待部署完成（约5-10分钟）

4. **方式2：手动上传**
   - 在 Render 创建 Web Service
   - 连接 GitHub 或上传 ZIP 文件
   - 设置环境变量

5. **获取 URL**：
   ```
   示例：https://legal-ai-api.onrender.com/model
   ```

6. **提交 JSON**：
   ```json
   {
     "api_key": "https://legal-ai-api.onrender.com/model"
   }
   ```

**优点：** ✅ 免费、稳定、固定 URL、自动 HTTPS  
**缺点：** 免费版15分钟无请求会休眠（首次请求较慢）

---

### 方案 C：Railway

**步骤类似 Render，注册后连接 GitHub 即可自动部署。**

---

## 对比表

| 特性 | ngrok | Render | Railway |
|------|-------|--------|---------|
| 部署时间 | 5分钟 | 15分钟 | 15分钟 |
| 稳定性 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 固定URL | ❌ | ✅ | ✅ |
| 需要本地运行 | ✅ | ❌ | ❌ |
| 免费额度 | 有限制 | 750小时/月 | $5/月 |
| 推荐度 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |

---

## 我的推荐 🎯

### 测试阶段
👉 **使用 ngrok**：最快最简单

### 正式提交
👉 **使用 Render**：稳定、免费、有固定 URL

---

## 详细文档

- **如何推送到 GitHub**：查看 `GITHUB_PUSH_GUIDE.md` 📤
- 所有免费方案：查看 `FREE_DEPLOYMENT.md`
- 服务器部署：查看 `DEPLOYMENT.md`
- 快速开始：查看 `QUICK_START.md`

---

## 常见问题

**Q: ngrok URL 变了怎么办？**  
A: 重新提交新的 URL，或者使用 Render 获取固定 URL

**Q: Render 部署失败？**  
A: 检查环境变量是否设置正确，查看部署日志

**Q: 需要修改代码吗？**  
A: 不需要！现有代码已经适配所有平台

**Q: 如何将代码推送到 GitHub？**  
A: 查看详细指南 `GITHUB_PUSH_GUIDE.md`，包含完整的步骤和常见问题解答




